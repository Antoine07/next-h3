# TP ‚Äî Cr√©er et comprendre la base de donn√©es d‚Äôune application de quiz

##  Objectifs p√©dagogiques

## Indications

V√©rifiez avant de commencer le TP que vous avez bien une connexion √† la base de donn√©es

```
mysql -u root -p
```

Cr√©ez un fichier `init_quiz_app.sql` pour mettre dans ce fichier le script permettant de cr√©er les tables de la base de donn√©es

Une fois dans le dossier ins√©rez les donn√©es en base de donn√©es.

```sql
mysql -uroot -psecret quiz_app < init_quiz_app.sql
```

##  Contexte

Vous travaillez sur une application de **quiz en ligne**.

Un quiz :

* appartient √† un utilisateur
* contient plusieurs questions
* chaque question a plusieurs choix (QCM)
* les utilisateurs peuvent laisser des retours (feedback)
* les quiz peuvent √™tre associ√©s √† plusieurs tags

---

## Mod√©lisation (sans code)

###  Identifier les entit√©s

√Ä partir du contexte, identifiez les **entit√©s principales** :

* Utilisateur
* Quiz
* Question
* Choix
* Feedback
* Tag

> **Question** :

> Quelles informations doit contenir chaque entit√© ?

---

### Dessiner le sch√©ma relationnel (√† la main)

Sur papier ou tableau blanc :

* dessinez chaque table
* indiquez :

  * la cl√© primaire (PK)
  * les cl√©s √©trang√®res (FK)
* reliez les tables entre elles

üëâ **√Ä faire appara√Ætre** :

* 1 utilisateur ‚Üí N quiz
* 1 quiz ‚Üí N questions
* 1 question ‚Üí N choix
* N quiz ‚Üî N tags


**Livrable attendu** :
un sch√©ma clair avec les relations.

---

##  Cr√©ation de la base (SQL)

### Cr√©er la base de donn√©es

```sql
CREATE DATABASE quiz_app
CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci;
```

Puis :

```sql
USE quiz_app;
```

---

### Cr√©er les tables (structure)

Cr√©er les tables suivantes :

* `users`
* `quizzes`
* `questions`
* `choices`
* `feedbacks`
* `tags`
* `quiz_tags`

üëâ **Consignes** :

* chaque table a une cl√© primaire
* les relations utilisent des cl√©s √©trang√®res
* les textes sont en UTF-8

---

##   Insertion de donn√©es simples

### Ins√©rer des donn√©es

Ins√©rez :

* 2 utilisateurs
* 2 quiz
* au moins :

  * 1 question par quiz
  * 2 choix par question
  * 1 tag par quiz

> Les textes peuvent √™tre simples (ex. ‚ÄúOui / Non‚Äù).

---

## V√©rifications

###  V√©rifier les relations

Ex√©cutez les requ√™tes suivantes :

```sql
SELECT * FROM quizzes;
SELECT * FROM questions;
SELECT * FROM choices;
```

üëâ **Question** :

> Comment savoir √† quel quiz appartient une question ?

---

##  R√©flexion (sans SQL)

### Questions de compr√©hension

R√©pondez par √©crit :

1. Pourquoi ne met-on pas les questions directement dans la table `quizzes` ?
2. Pourquoi la relation quiz ‚Üî tags n√©cessite une table interm√©diaire ?
3. Que se passerait-il si on supprimait un quiz ?

---

## Impl√©mentez le code

Dans l'api Next.js r√©cup√©rez l'ensemble des quizzies et affichez cette liste dans la page des quizzies.

---

##  Livrables attendus

* sch√©ma des relations (photo ou PDF)
* script SQL de cr√©ation
* quelques donn√©es ins√©r√©es
* r√©ponses aux questions
